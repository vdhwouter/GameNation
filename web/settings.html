
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Profile settings</title>
    <link rel="stylesheet" href="css/stylesProfile.css" />

</head>
<body>

<header>

</header>



<script type="text/javascript">

	function findGetParameter(parameterName) {
		var result = null,
				tmp = [];
		location.search
				.substr(1)
				.split("&")
				.forEach(function (item) {
					tmp = item.split("=");
					if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
				});
		return result;
	}

	var APICALL = function(){
		var request = new XMLHttpRequest();
		request.addEventListener('load',listen)
		request.open("get", 'http://localhost:8080/users/' + findGetParameter('username'), true);
		request.send();
	};

	var listen = function(){
		document.getElementById('username').value = JSON.parse(this.responseText).username;
		document.getElementById('email').value = JSON.parse(this.responseText).email;
		document.getElementById('firstname').value = JSON.parse(this.responseText).firstname;
		document.getElementById('lastname').value = JSON.parse(this.responseText).lastname;
		document.getElementById('teamspeakAddr').value = JSON.parse(this.responseText).teamspeak;
		document.getElementById('DiscordAddr').value = JSON.parse(this.responseText).discord;
		document.getElementById('descriptionText').value = JSON.parse(this.responseText).description;
	};

	APICALL();

</script>

<div class="wrapper">
<!-- content -->
    <h2>Profile</h2>
    <a href="profile.html?username=" class="btn" id="set">Return</a>
    <div id="side">
    	<img id="profileImage" src="img/avatar-member.jpg"/>
    	<input type="submit" name="update-submit" id="submit-photo" class="btn" value="Edit photo" />
    </div>

    <div id="profileData">
		<form action="http://localhost:8080/users" method="post" role="form" id="formdata">
		    <dl>
		    	<dt><label>First Name</label></dt>
		        <dd><input type="text" name="firstname" id="firstname" autocomplete="off"/></dd>

				<dt><label>Last name</label></dt>
		        <dd><input type="text" name="lastname" id="lastname"  autocomplete="off" /></dd>

		        <dt><label>Username</label></dt>
		        <dd><input type="text" name="username" id="username"  autocomplete="off" value="" /></dd>

		        <dt><label>E-mail</label></dt>
		        <dd><input type="text" name="email" id="email" autocomplete="off" value=""/></dd>

		    	<dt><label>Password</label></dt>
		        <dd><input type="password" name="password" id="password" autocomplete="off" /></dd>

		        <dt><label>Confirmation</label></dt>
		        <dd><input type="password" name="confirmpass" id="confirmpass" autocomplete="off" /></dd>

		    	<dt><label>Teamspeak-Address</label></dt>
		        <dd><input type="text" name="teamspeak" id="teamspeakAddr" autocomplete="off"/></dd>

				<dt><label>Discord-Address</label></dt>
		        <dd><input type="text" name="discord" id="DiscordAddr"  autocomplete="off" /></dd>

		    	<dt><label>Description</label></dt>
				<dd><textarea name="description" id="descriptionText" rows="10" value=""></textarea></dd>

				<dd><input type="submit" name="update-submit" class="btn" id="submit" value="Save" /></dd>
		    </dl>
		</form>
	</div>

    <div id="games">
    	<h3>Games</h3>
    	<ul>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" src="img/payday.jpg"/>
    				<p>payday</p>
    			</a>
    		</li>
    		<li>
    			<a href="#">
    				<img class="game" id="addGame" src="img/addGame.png"/>
    				<p>New game</p>
    			</a>
    		</li>
    	</ul>
    </div>
</div>

<script>
	document.getElementById('set').href += findGetParameter('username')
</script>

</body>
</html>